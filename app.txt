Fix part 1 of search bug
Fix part 2 of search bug
Fix part 3 of search bug
